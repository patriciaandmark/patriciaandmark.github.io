
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ‘°ðŸ¤µ | Patricia & Mark | June 08, 2026</title>
  
  <link rel="icon" type="image/png" href="/resources/site-icon.png">
  <link rel="shortcut icon" href="/resources/site-icon.png">
  <link rel="apple-touch-icon" href="/resources/site-icon.png">

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@400;600&family=Libre+Baskerville:wght@400;700&family=Lancelot&display=swap" rel="stylesheet">
  <style>
    :root {
      --font-heading: 'Libre Baskerville', serif;
      --font-body: 'Libre Baskerville', serif;
      --color-background: #f9f4f0;
      --color-surface: #ffffff;
      --color-heading: #5e524b;
      --color-text: #8c7a72;
      --color-accent: #d8c3b4;
      --color-muted: #bfa89c;
    }

    body {
      font-family: var(--font-body);
      background: var(--color-background);
      color: var(--color-text);
      margin: 0;
      text-align: center;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-heading);
      color: var(--color-heading);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    p, li, span, label {
      color: var(--color-text);
    }

    nav {
      background: var(--color-surface);
      padding: 1rem;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 1px 4px rgba(94, 82, 75, 0.08);
    }
    nav a {
      margin: 0 1rem;
      text-decoration: none;
      color: var(--color-heading);
      font-weight: 600;
      font-family: var(--font-heading);
      letter-spacing: 0.5px;
    }
    nav a:hover {
      color: var(--color-accent);
      transition: color 0.3s ease;
    }
    footer {
      font-family: var(--font-heading);
      font-size: 0.5rem;
      color: var(--color-heading);
      background: var(--color-surface);
      padding: 1.5rem 1rem 2.25rem;
      letter-spacing: 0.5px;
      border-top: 1px solid rgba(94, 82, 75, 0.08);
      display: flex;
      justify-content: center;
    }
    footer .footer-inner {
      width: min(100%, 420px);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.85rem;
      text-align: center;
    }
    footer p {
      margin: 0;
    }
    footer iframe {
      width: 100%;
      height: 152px;
      border: none;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(94, 82, 75, 0.12);
    }
    #page-content {
      padding: 2rem;
      opacity: 0;
      transition: opacity 0.5s ease;
      font-family: var(--font-body);
    }
    #page-content.loaded {
      opacity: 1;
    }
  </style>
</head>
<body>
  <nav>
    <a href="#" onclick="return navigateTo('welcome');">Home</a>
    <a href="#" onclick="return navigateTo('our-story');">Our Story</a>
    <a href="#" onclick="return navigateTo('gallery');">Gallery</a>
    <a href="#" onclick="return navigateTo('rsvp');">RSVP</a>
    <a href="#" onclick="return navigateTo('faq');">FAQs</a>
  </nav>

  <main id="page-content"></main>

  <footer>
    <div class="footer-inner">
      <p>Made with love by Patricia &amp; Mark</p>
      <iframe
        title="Spotify playlist"
        src="https://open.spotify.com/embed/playlist/5igpmM1ZTNWsN0BLyTwYWl?utm_source=generator"
        loading="lazy"
        allowtransparency="true"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      ></iframe>
    </div>
  </footer>

  <script>
    const ROUTES = {
      'welcome':   { file: 'welcome.html', token: 'c11' },
      'our-story': { file: 'our-story.html', token: 'a24' },
      'gallery':   { file: 'gallery.html', token: 'f35' },
      'rsvp':      { file: 'rsvp.html', token: 'k48' },
      'faq':       { file: 'faq.html', token: 'q59' }
    };

    const DEFAULT_ROUTE = 'welcome';
    let currentRouteKey = null;

    function getRoute(identifier) {
      if (identifier === null || identifier === undefined) return null;
      const raw = String(identifier).trim().toLowerCase();
      if (!raw) return null;

      if (Object.prototype.hasOwnProperty.call(ROUTES, raw)) {
        const match = ROUTES[raw];
        return { key: raw, file: match.file, token: match.token };
      }

      const normalizedFile = raw.endsWith('.html') ? raw : `${raw}.html`;
      for (const [key, value] of Object.entries(ROUTES)) {
        if (value.token.toLowerCase() === raw) {
          return { key, file: value.file, token: value.token };
        }
        if (value.file.toLowerCase() === normalizedFile) {
          return { key, file: value.file, token: value.token };
        }
        const fileWithoutExt = value.file.replace(/\.html$/i, '').toLowerCase();
        if (fileWithoutExt === raw) {
          return { key, file: value.file, token: value.token };
        }
      }

      return null;
    }

    function executeEmbeddedScripts(container) {
      const scripts = container.querySelectorAll('script');
      scripts.forEach((script) => {
        const newScript = document.createElement('script');
        if (script.src) {
          newScript.src = script.src;
          newScript.defer = script.defer;
          newScript.async = script.async;
        } else {
          newScript.textContent = script.textContent;
        }
        document.body.appendChild(newScript);
        script.remove();
        if (!newScript.src) {
          newScript.remove();
        } else {
          const cleanup = () => newScript.remove();
          newScript.addEventListener('load', cleanup, { once: true });
          newScript.addEventListener('error', cleanup, { once: true });
        }
      });
    }

    function updateHistory(route, replace) {
      const url = new URL(window.location);
      const params = new URLSearchParams(url.search);
      params.delete('page');
      params.set('v', route.token);
      const query = params.toString();
      const targetUrl = query ? `${url.pathname}?${query}` : url.pathname;
      const method = replace ? 'replaceState' : 'pushState';
      window.history[method]({ route: route.key }, '', targetUrl);
    }

    function renderRoute(input, options = {}) {
      const routeInfo = typeof input === 'string' ? getRoute(input) : input;
      const route = routeInfo || getRoute(DEFAULT_ROUTE);
      if (!route) return;
      if (route.key === currentRouteKey && !options.force) return;

      const content = document.getElementById('page-content');
      content.classList.remove('loaded');

      fetch(route.file)
        .then((response) => response.text())
        .then((html) => {
          content.innerHTML = html;
          executeEmbeddedScripts(content);
          setTimeout(() => content.classList.add('loaded'), 50);
          window.scrollTo(0, 0);
          currentRouteKey = route.key;
          if (options.updateHistory !== false) {
            updateHistory(route, Boolean(options.replace));
          }
        });
    }

    function resolveInitialRoute() {
      const params = new URLSearchParams(window.location.search);
      const token = params.get('v');
      if (token) {
        const routeFromToken = getRoute(token);
        if (routeFromToken) return routeFromToken;
      }

      const legacy = params.get('page');
      if (legacy) {
        const routeFromLegacy = getRoute(legacy);
        if (routeFromLegacy) return routeFromLegacy;
      }

      return getRoute(DEFAULT_ROUTE);
    }

    function navigateTo(routeKey) {
      renderRoute(routeKey);
      return false;
    }

    window.navigateTo = navigateTo;

    window.addEventListener('popstate', (event) => {
      const stateRoute = event.state && event.state.route;
      if (stateRoute) {
        renderRoute(stateRoute, { updateHistory: false, force: true });
      } else {
        const resolved = resolveInitialRoute();
        renderRoute(resolved ? resolved.key : DEFAULT_ROUTE, { updateHistory: false, replace: true, force: true });
      }
    });

    window.addEventListener('load', () => {
      const initial = resolveInitialRoute();
      renderRoute(initial ? initial.key : DEFAULT_ROUTE, { replace: true, force: true });
    });
  </script>
</body>
</html>
